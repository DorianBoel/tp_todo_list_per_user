<h1 class="is-size-3 has-text-centered mb-5">{{ title }}</h1>

<form *ngIf="formGroup" [formGroup]="formGroup" (ngSubmit)="submitForm()">
    <div class="field is-horizontal">
        <div class="field-label is-normal">
            <label class="label" for="name">Nom</label>
        </div>
        <div class="field-body">
            <div class="field">
                <div class="control is-expanded">
                    <input id="name" class="input" [ngClass]="{'is-danger': showFormFeedback('name')}" formControlName="name" type="text" placeholder="Nom de la tâche" required>
                </div>
                <p *ngIf="showFormFeedback('name') && getFormControl('name').errors?.required" class="help is-danger">
                    Nom requis
                </p>
            </div>
        </div>
    </div>
    <div class="field is-horizontal mt-6-desktop">
        <div class="field-label is-normal">
            <label class="label" for="category">Catégorie</label>
        </div>
        <div class="field-body">
            <div class="field">
                <div class="control">
                    <div class="select" [ngClass]="{'is-danger': showFormFeedback('category')}">
                        <select id="category" formControlName="category" required>
                            <option [ngValue]="null" disabled>Sélectionnez une catégorie</option>
                            <option *ngFor="let category of categories" [ngValue]="category.id">{{ category.label }}</option>
                        </select>
                    </div>
                </div>
                <div *ngIf="showFormFeedback('category')">
                    <p *ngIf="getFormControl('category').errors?.required" class="help is-danger">
                        Catégorie requise
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="field is-horizontal mt-6-desktop">
        <div class="field-label is-normal">
            <label class="label" for="user">Attribuée à</label>
        </div>
        <div class="field-body">
            <div class="field">
                <div class="control">
                    <div class="select" [ngClass]="{'is-danger': showFormFeedback('user')}">
                        <select id="user" formControlName="user" required>
                            <option [ngValue]="null" disabled>Sélectionnez un utilisateur</option>
                            <option *ngFor="let user of users" [ngValue]="user.id">{{ user.username }}</option>
                        </select>
                    </div>
                </div>
                <div *ngIf="showFormFeedback('user')">
                    <p *ngIf="getFormControl('user').errors?.required" class="help is-danger">
                        Utilisateur requis
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="task" class="field is-horizontal mt-6-desktop">
        <div class="field-label">
            <label class="label" for="complete">Terminée</label>
        </div>
        <div class="field-body">
            <div class="field">
                <div class="control">
                    <input id="complete" type="checkbox" formControlName="completed">
                </div>
            </div>
        </div>
    </div>
    <div class="field is-grouped is-grouped-right mt-6-desktop">
        <div class="control">
            <input class="button is-link" type="submit" value="Valider">
        </div>
    </div>
</form>
